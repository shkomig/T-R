# תוכנית עבודה - מערכת מסחר אוטומטית
## תאריך יצירה: 29 אוקטובר 2025

---

## 📋 סקירה כללית
תוכנית עבודה מקיפה לפיתוח מערכת מסחר אוטומטית מבוססת AI עם חיבור ל-Interactive Brokers (פורט 7497), התמקדות בנרות 30 דקות ורמת סיכון נמוכה.

---

## 🎯 שלב 1: הכנה וסביבת פיתוח (שבוע 1)

### יום 1-2: הגדרת סביבת פיתוח
- [ ] התקנת Python 3.10+ וסביבת עבודה (VS Code/PyCharm)
- [ ] יצירת virtual environment למערכת
- [ ] התקנת ספריות בסיסיות:
  ```bash
  pip install pandas numpy ta-lib ib_insync plotly fastapi pyyaml
  ```
- [ ] הגדרת Git repository לניהול קוד
- [ ] יצירת מבנה תיקיות לפי הארכיטקטורה

### יום 3-4: הגדרת חיבור ל-Interactive Brokers
- [ ] התקנת TWS/IB Gateway
- [ ] הגדרת חיבור לפורט 7497 (Paper Trading)
- [ ] בדיקת חיבור בסיסי עם ib_insync
- [ ] כתיבת סקריפט בדיקה לחיבור ונתוני שוק
- [ ] תיעוד פרמטרי חיבור ב-`config/api_credentials.yaml`

### יום 5-7: הגדרת TradingView ואינדיקטורים ראשוניים
- [ ] פתיחת חשבון TradingView (Pro מומלץ)
- [ ] למידת Pine Script - בסיס
- [ ] צפייה בסרטונים מהפלייליסט "Trading With AI"
- [ ] יצירת אינדיקטור EMA פשוט ב-TradingView
- [ ] בדיקת אינדיקטור על נתונים היסטוריים

**תוצר שלב 1:**
- סביבת פיתוח מוכנה ומוגדרת
- חיבור עובד ל-Interactive Brokers
- הכרות ראשונית עם TradingView

---

## 🔧 שלב 2: פיתוח תשתית בסיסית (שבוע 2)

### יום 1-2: מודול נתונים (Data Layer)
- [ ] פיתוח `data_processor.py` - עיבוד נתונים גולמיים
- [ ] פיתוח `broker_interface.py` - חיבור ל-IB
- [ ] פיתוח פונקציות למשיכת נתוני שוק בזמן אמת
- [ ] פיתוח פונקציות למשיכת נתונים היסטוריים
- [ ] יצירת מנגנון cache לנתונים

### יום 3-4: מודול אינדיקטורים (Indicators)
- [ ] פיתוח `custom_indicators.py`:
  - EMA (12, 26, 50)
  - VWAP
  - RSI (14)
  - Bollinger Bands (20, 2)
- [ ] פיתוח `volume_analysis.py`:
  - Volume Profile
  - High-Volume Detection
  - Volume Breakout Signals
- [ ] בדיקת נכונות חישובים מול TradingView

### יום 5-7: מודול ניהול סיכונים (Risk Management)
- [ ] פיתוח `position_sizing.py`:
  - חישוב גודל פוזיציה (2% מהון)
  - התאמה לתנודתיות
- [ ] פיתוח `stop_loss.py`:
  - Stop Loss דינמי (1% מפוזיציה)
  - Trailing Stop
  - Take Profit (יחס 2:1)
- [ ] פיתוח `portfolio_risk.py`:
  - מעקב Drawdown
  - הגבלת פוזיציות פתוחות (מקסימום 5)
  - ניתוח קורלציה בין מניות

**תוצר שלב 2:**
- תשתית נתונים עובדת
- ספריית אינדיקטורים מותאמים
- מערכת ניהול סיכונים בסיסית

---

## 📊 שלב 3: פיתוח אסטרטגיות (שבוע 3)

### יום 1-2: אסטרטגיית EMA Cross
- [ ] פיתוח `ema_cross_strategy.py`
- [ ] הגדרת כללי כניסה ויציאה
- [ ] אינטגרציה עם מודול ניהול סיכונים
- [ ] בדיקות יחידה (Unit Tests)
- [ ] תיעוד האסטרטגיה

### יום 3-4: אסטרטגיית VWAP
- [ ] פיתוח `vwap_strategy.py`
- [ ] הגדרת סטיות (0.5%)
- [ ] כללי כניסה לונג/שורט
- [ ] בדיקות יחידה
- [ ] תיעוד האסטרטגיה

### יום 5-6: אסטרטגיית Volume Breakout
- [ ] פיתוח `volume_breakout_strategy.py`
- [ ] זיהוי נפח חריג (1.5x ממוצע)
- [ ] אישור פריצה (3 נרות)
- [ ] בדיקות יחידה
- [ ] תיעוד האסטרטגיה

### יום 7: מנוע אסטרטגיות (Strategy Engine)
- [ ] פיתוח מנגנון לניהול מספר אסטרטגיות במקביל
- [ ] מערכת משקלים לאסטרטגיות שונות
- [ ] מנגנון סינון סיגנלים (הסכמה בין אסטרטגיות)

**תוצר שלב 3:**
- 3 אסטרטגיות מסחר מוכנות
- מנוע אסטרטגיות משולב
- תיעוד מפורט לכל אסטרטגיה

---

## 🧪 שלב 4: Backtesting ואופטימיזציה (שבוע 4)

### יום 1-2: בניית מנוע Backtesting
- [ ] פיתוח `backtest_engine.py`
- [ ] סימולציית ביצוע פקודות
- [ ] מעקב פוזיציות וירטואליות
- [ ] מנגנון slippage ועמלות
- [ ] שמירת לוג מפורט של כל עסקה

### יום 3-4: מודול ניתוח ביצועים
- [ ] פיתוח `performance_analyzer.py`:
  - Total Return
  - Sharpe Ratio
  - Sortino Ratio
  - Maximum Drawdown
  - Win Rate
  - Average Win/Loss
- [ ] פיתוח `report_generator.py`:
  - דוחות PDF
  - גרפים ויזואליים
  - טבלאות סטטיסטיות

### יום 5-6: הרצת Backtesting
- [ ] הרצת כל אסטרטגיה על נתוני 1-2 שנים
- [ ] השוואה בין אסטרטגיות
- [ ] זיהוי נקודות חוזק וחולשה
- [ ] תיעוד תוצאות

### יום 7: אופטימיזציה
- [ ] אופטימיזציה של פרמטרים (EMA periods, VWAP deviation, וכו')
- [ ] Optimization על נתונים In-Sample
- [ ] Validation על נתונים Out-of-Sample
- [ ] מניעת Overfitting
- [ ] תיעוד פרמטרים אופטימליים

**תוצר שלב 4:**
- מנוע Backtesting מלא
- דוחות ביצועים מפורטים
- פרמטרים מותאמים לכל אסטרטגיה

---

## ⚙️ שלב 5: מערכת ביצוע והפעלה (שבוע 5)

### יום 1-2: מודול ניהול הזמנות
- [ ] פיתוח `order_manager.py`:
  - פקודות Market/Limit/Stop
  - ניהול תור הזמנות
  - retry mechanism
  - error handling
- [ ] פיתוח `position_tracker.py`:
  - מעקב פוזיציות פתוחות
  - עדכון real-time
  - חישוב P&L

### יום 3-4: מערכת ניטור והתראות
- [ ] פיתוח `alert_system.py`:
  - התראות SMS/Email/Telegram
  - התראות על סיגנלים
  - התראות על סיכונים
  - התראות על שגיאות מערכת
- [ ] פיתוח `logger.py`:
  - לוג מפורט לכל פעולה
  - רמות חומרה (INFO, WARNING, ERROR)
  - ארכיון לוגים

### יום 5-6: Dashboard ו-Monitoring
- [ ] פיתוח `dashboard.py` (FastAPI):
  - תצוגת פוזיציות נוכחיות
  - ביצועים בזמן אמת
  - גרפים אינטראקטיביים
  - מצב מערכת (System Health)
- [ ] חיבור ל-BI System הקיים

### יום 7: בדיקות Paper Trading
- [ ] הפעלת המערכת במצב Paper Trading
- [ ] מעקב במשך יום מסחר שלם
- [ ] זיהוי באגים ותקלות
- [ ] תיקון בעיות

**תוצר שלב 5:**
- מערכת ביצוע מלאה ועובדת
- Dashboard לניטור
- מערכת התראות

---

## 🚀 שלב 6: הפעלה מדורגת (שבוע 6 ואילך)

### שבוע 6: Paper Trading מתמשך
- [ ] הרצת המערכת במצב Paper Trading למשך שבוע שלם
- [ ] מעקב יומיומי ותיקון בעיות
- [ ] השוואת ביצועים למטרות
- [ ] איסוף פידבק ושיפורים

### שבוע 7: הפעלה חיה - שלב ראשון
- [ ] התחלת מסחר חי עם הון קטן (5-10% מההון)
- [ ] מסחר באסטרטגיה אחת בלבד (הכי מוצלחת ב-Backtesting)
- [ ] מעקב צמוד יומיומי
- [ ] תיעוד כל עסקה והחלטה

### שבוע 8+: הרחבה מדורגת
- [ ] הגדלת הון למסחר (אם התוצאות חיוביות)
- [ ] הוספת אסטרטגיות נוספות
- [ ] מסחר במספר מניות במקביל
- [ ] שיפור מתמיד

**תוצר שלב 6:**
- מערכת פועלת בשוק חי
- ניסיון מעשי ונתוני ביצועים אמיתיים

---

## 📚 משימות מקבילות - למידה והתפתחות

### משימות שבועיות קבועות:
- [ ] צפייה ב-2-3 סרטונים מ-"Trading With AI" playlist
- [ ] צפייה ב-1-2 סרטונים מ-"Trading Psychology" playlist
- [ ] קריאת פרק מספר מסחר מומלץ
- [ ] ניתוח 5 עסקאות מוצלחות מהשוק
- [ ] עדכון יומן מסחר אישי

### משימות חודשיות:
- [ ] סקירת ביצועים חודשית
- [ ] אופטימיזציה חוזרת של פרמטרים
- [ ] הוספת אינדיקטור/אסטרטגיה חדשה
- [ ] עדכון מערכת ניהול סיכונים
- [ ] השתתפות בקהילת סוחרים (פורומים, קבוצות)

---

## 🎯 KPIs ויעדים

### יעדי שלב הפיתוח:
- [ ] 100% כיסוי בדיקות (Unit Tests)
- [ ] תיעוד מלא לכל מודול
- [ ] Sharpe Ratio > 1.5 ב-Backtesting
- [ ] Maximum Drawdown < 5%
- [ ] Win Rate > 55%

### יעדי הפעלה חיה:
- [ ] תשואה חודשית: 3-5%
- [ ] Sharpe Ratio > 1.2
- [ ] Maximum Drawdown < 7%
- [ ] אפס הפסדים קטסטרופליים (> 5%)
- [ ] זמן פעילות מערכת: 99%+

---

## 🛠️ כלים וטכנולוגיות

### סביבת פיתוח:
- Python 3.10+
- VS Code / PyCharm
- Git + GitHub

### ספריות Python:
- pandas, numpy - עיבוד נתונים
- ta-lib - אינדיקטורים טכניים
- ib_insync - חיבור ל-Interactive Brokers
- plotly, matplotlib - ויזואליזציה
- fastapi - Dashboard API
- pytest - בדיקות
- pyyaml - קבצי תצורה

### כלים חיצוניים:
- TradingView Pro
- Interactive Brokers TWS/Gateway
- Jupyter Notebook - ניתוח
- Docker - deployment (אופציונלי)

---

## ⚠️ סיכונים ואתגרים

### סיכונים טכניים:
- **ניתוק מ-IB API** → מנגנון reconnect אוטומטי
- **איכות נתונים** → validation ובדיקות
- **באגים בקוד** → בדיקות מקיפות
- **ביצועי מערכת** → אופטימיזציה וניטור

### סיכוני מסחר:
- **הפסדים בשוק חי** → התחלה עם הון קטן
- **Over-optimization** → validation על out-of-sample
- **רגשות וסטיות** → אוטומציה מלאה ומשמעת
- **שינויי שוק** → מעקב ועדכון מתמיד

---

## 📝 הערות חשובות

1. **משמעת היא הכל**: עקוב אחר התוכנית, אל תדלג על שלבים
2. **תיעוד מפורט**: תעד כל החלטה, כל שינוי, כל עסקה
3. **למידה מתמדת**: השוק משתנה, המשך ללמוד ולהתפתח
4. **ניהול סיכונים קודם כל**: אל תתפשר על כללי סיכון
5. **סבלנות**: תוצאות אמיתיות לוקחות זמן

---

## 📅 לוח זמנים מסכם

| שבוע | שלב | משך | תוצר עיקרי |
|------|-----|-----|------------|
| 1 | הכנה וסביבת פיתוח | 7 ימים | סביבה מוכנה + חיבור IB |
| 2 | פיתוח תשתית | 7 ימים | Data Layer + Indicators + Risk Management |
| 3 | פיתוח אסטרטגיות | 7 ימים | 3 אסטרטגיות מוכנות |
| 4 | Backtesting | 7 ימים | דוחות ביצועים + אופטימיזציה |
| 5 | מערכת ביצוע | 7 ימים | Order Management + Dashboard |
| 6 | Paper Trading | 7 ימים | בדיקות מעשיות |
| 7+ | הפעלה חיה | מתמשך | מסחר אמיתי |

---

**סה"כ זמן להפעלה ראשונית: 6-7 שבועות**

**תחילת מסחר חי מומלצת: לאחר 2-3 חודשים מתחילת הפרויקט**

---

*תוכנית עבודה זו היא מסמך חי - יש לעדכן ולהתאים לפי התקדמות ולקחים בשטח*

**בהצלחה! 🚀📈**
