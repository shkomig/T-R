# Trading System Configuration
# ================================

# System Settings
system:
  name: "AI Trading System"
  version: "1.0.0"
  timezone: "Israel"  # IST
  log_level: "INFO"  # DEBUG, INFO, WARNING, ERROR

# Market Settings
market:
  trading_hours:
    start: "09:30"  # Market open time
    end: "16:00"    # Market close time
    # Extended hours support
    extended_hours:
      enabled: true
      pre_market:
        start: "04:00"
        end: "09:30"
      after_hours:
        start: "16:00" 
        end: "20:00"
  timeframe: "30min"  # Primary timeframe for analysis
  warmup_bars: 100    # Number of bars to load for indicator warmup

# Interactive Brokers Settings
broker:
  name: "Interactive Brokers"
  host: "127.0.0.1"
  port: 7497  # 7497 for Paper Trading, 7496 for Live Trading
  client_id: 1
  timeout: 30
  reconnect_attempts: 5
  reconnect_delay: 10  # seconds
  use_delayed_data: true  # Use delayed market data if real-time not available
  delayed_data_delay: 15  # 15 minutes delay

# Strategy Settings
strategies:
  enabled:
    - "ema_cross"
    - "vwap"
    - "volume_breakout"
    - "rsi_divergence"
    - "advanced_volume_breakout"
  
  # EMA Cross Strategy (MORE AGGRESSIVE)
  ema_cross:
    enabled: true
    fast_ema: 12        # Faster response - reduced from 20
    slow_ema: 26        # Faster response - reduced from 50
    signal_line: 9
    min_volume: 50000   # Lower volume requirement
    rsi_overbought: 80  # More room for signals
    rsi_oversold: 20    # More room for signals
    
  # VWAP Strategy (MORE AGGRESSIVE)
  vwap:
    enabled: true
    deviation_percent: 0.3  # More sensitive - reduced from 0.8
    min_volume: 50000       # Lower volume requirement
    confirmation_bars: 1    # Faster entry - reduced from 2
    
  # Volume Breakout Strategy (MORE AGGRESSIVE)
  volume_breakout:
    enabled: true
    volume_threshold: 1.3      # More sensitive - reduced from 2.0
    price_change_threshold: 1.0  # Lower price move requirement
    confirmation_candles: 1    # Immediate entry - reduced from 2
    min_volume: 50000          # Lower volume requirement

  # Extended Hours Strategy Settings (More Conservative)
  extended_hours:
    enabled: true
    strategies:
      # Only Volume Breakout and Momentum for extended hours
      volume_breakout:
        enabled: true
        volume_threshold: 2.5        # More conservative than regular hours
        price_change_threshold: 1.5  # Higher threshold for extended hours
        confirmation_candles: 2      # Require more confirmation
        min_volume: 100000           # Higher volume requirement
        max_position_size: 0.06      # 6% max position (vs 12% regular)
        stop_loss: 0.02              # 2% stop loss (mandatory)
        
      momentum:
        enabled: true
        rsi_threshold: 75            # Higher RSI for momentum signals
        volume_multiplier: 2.0       # Require 2x average volume
        price_move_threshold: 2.0    # Require 2% price move
        confirmation_bars: 3         # More confirmation needed
        max_position_size: 0.06      # 6% max position
        stop_loss: 0.025             # 2.5% stop loss
        
      # Disable EMA Cross and VWAP for extended hours (too risky)
      ema_cross:
        enabled: false
      vwap:
        enabled: false
    use_atr_confirmation: false  # Disable for more signals
  
  # Mean Reversion Strategy Configuration
  Mean_Reversion:
    enabled: true
    
    # Z-Score parameters
    lookback_period: 21  # Days for mean and std calculation
    entry_z_score: 2.0   # Enter when Z-score crosses ±2.0
    exit_z_score: 0.5    # Exit when Z-score returns to ±0.5
    min_std: 0.001       # Minimum std deviation to avoid division by zero
    
    # Additional filters
    volume_filter: true
    min_volume: 100000   # Minimum daily volume
    trend_filter: false  # Set true to avoid trading against strong trends
    trend_period: 50     # Period for trend detection (if enabled)
    
    # Risk management
    max_holding_period: 10  # Maximum days to hold position
    stop_loss_z: 3.0        # Emergency exit if Z-score > 3.0
    
    # Position sizing
    scale_by_z_score: true  # Larger positions for stronger signals

  # Opening Range Breakout (ORB) Strategy
  ORB:
    opening_range_minutes: 30  # First 30min defines range (1 bar in our data)
    breakout_confirmation: 1   # Immediate entry on breakout
    min_range_percent: 0.2     # Lower threshold (0.2%)
    
    # Risk management
    stop_loss_atr_multiplier: 2.0  # Wider stop
    risk_reward_ratio: 2.0         # 2:1 reward:risk
    trailing_stop_percent: 2.0     # 2% trailing stop
    
    # Filters
    min_atr: 0.2              # Lower volatility threshold
    volume_filter: false      # Disable volume filter
    min_volume: 50000         # Lower min shares
    volume_threshold: 1.0     # No volume requirement

  # Momentum Strategy (Donchian Breakout)
  Momentum:
    lookback_period: 10        # Shorter lookback (10 bars)
    confirmation_bars: 0       # No confirmation needed
    
    # Risk management
    stop_loss_atr_multiplier: 3.0  # Wider stop
    trailing_stop_percent: 3.0     # 3% trailing stop
    take_profit_percent: 15.0      # 15% profit target
    
    # Filters
    min_atr: 0.2              # Lower volatility threshold
    volume_filter: false      # Disable volume filter
    min_volume: 50000         # Lower min shares
    
    # Trend filter
    use_trend_filter: false   # Disable trend filter
    trend_ma_period: 50       # Shorter MA period

  # Bollinger Bands Strategy
  Bollinger_Bands:
    period: 15                # Shorter SMA period
    num_std: 1.5              # Narrower bands (more signals)
    
    # Entry/Exit
    entry_threshold: 0.0      # % below lower band to enter
    exit_at_middle: true      # Exit at middle band
    
    # Risk management
    stop_loss_percent: 4.0    # Wider stop loss
    take_profit_at_upper: true  # Take profit at upper band
    
    # Filters
    volume_filter: false      # Disable volume filter
    min_volume: 50000         # Lower min shares
    rsi_confirmation: false   # Disable RSI confirmation
    rsi_oversold: 35          # More lenient
    rsi_overbought: 65        # More lenient
    
    # Bandwidth filter
    min_bandwidth_percent: 1.0  # Lower bandwidth threshold

  # Mean Reversion Strategy (Enhanced Z-Score)
  Mean_Reversion:
    enabled: true
    lookback_period: 20         # Days for mean calculation
    entry_z_score: 2.0          # Entry threshold (±2.0)
    exit_z_score: 0.5           # Exit threshold (±0.5)
    min_std: 0.001              # Minimum std to avoid division by zero
    
    # Enhanced features
    use_dynamic_threshold: true  # Adjust threshold based on volatility
    multi_timeframe: true       # Use multiple Z-Score timeframes
    
    # Filters
    volume_filter: true         # Enable volume filtering
    min_volume: 100000          # Minimum volume
    trend_filter: false         # Optional trend filter
    trend_period: 50            # Trend MA period
    
  # Pairs Trading Strategy (Statistical Arbitrage) 
  Pairs_Trading:
    enabled: true
    pair_symbols: ['AAPL', 'MSFT']  # Trading pair (Tech giants)
    
    # Analysis windows
    lookback_window: 60         # Days for correlation analysis
    cointegration_window: 252   # 1 year for cointegration test
    
    # Trading thresholds (Z-Score based)
    entry_threshold: 2.0        # Entry when |Z-Score| >= 2.0
    exit_threshold: 0.5         # Exit when |Z-Score| <= 0.5  
    stop_loss_threshold: 3.0    # Stop loss at |Z-Score| >= 3.0
    
    # Statistical requirements
    min_correlation: 0.7        # Minimum correlation for pair
    max_pvalue: 0.05           # Max p-value for cointegration
    
    # Risk management  
    max_holding_days: 20       # Maximum holding period
    position_ratio: 1.0        # Capital allocation ratio
    
    # Performance expectations
    expected_win_rate: 0.68    # 68% win rate
    expected_sharpe: 1.8       # Sharpe ratio 1.8
    max_drawdown: 0.12         # 12% max drawdown
    
    # Risk management
    max_holding_period: 10      # Max days to hold position
    stop_loss_z: 3.0           # Stop if Z-score goes more extreme
    min_confirmations: 3        # Minimum conditions for signal

# Signal Settings
signals:
  require_confirmation: true  # Require multiple signals
  min_strategies_agreement: 2  # Minimum strategies that must agree
  max_signals_per_day: 10

# Universe Settings (Stocks to trade)
universe:
  # Add specific tickers or use screener
  tickers:
    - "AAPL"
    - "MSFT"
    - "GOOGL"
    - "AMZN"   # Amazon - E-commerce/Cloud
    - "AMD"    # Advanced Micro Devices - Semiconductors
    - "ARM"    # ARM Holdings - Chip Design
    - "TSM"    # Taiwan Semiconductor - Chip Manufacturing
    - "TSLA"
    - "NVDA"   # NVIDIA - AI/Chips
    - "META"   # Meta Platforms - Social Media
    - "NFLX"   # Netflix - Streaming
    - "QBTS"   # D-Wave Quantum - Quantum Computing
    - "ARQQ"   # Arqit Quantum - Quantum Encryption
    - "IONQ"   # IonQ - Quantum Computing
    - "DJT"    # Trump Media & Technology Group
    - "PLTR"   # Palantir - Big Data Analytics
    - "QQQ"    # Invesco QQQ Trust - NASDAQ-100 ETF
    - "SPY"    # SPDR S&P 500 ETF Trust
  
  # Screener criteria
  screener:
    min_price: 10
    max_price: 500
    min_avg_volume: 1000000  # 1M shares daily
    min_market_cap: 1000000000  # 1B USD

# Position Management
position:
  sizing_method: "risk_based"  # fixed, risk_based, volatility_adjusted
  max_positions: 8  # Increased from 5 to allow more diversification
  allow_pyramiding: false
  allow_hedging: false

# Execution Settings
execution:
  order_type: "LIMIT"  # MARKET, LIMIT, STOP
  limit_price_offset: 0.1  # Percentage offset for limit orders
  time_in_force: "DAY"  # DAY, GTC, IOC, FOK
  retry_attempts: 3
  retry_delay: 5  # seconds

# Monitoring & Alerts
monitoring:
  enable_alerts: true
  alert_channels:
    - "email"
    - "telegram"
  
  # Alert conditions
  alerts:
    on_signal: true
    on_entry: true
    on_exit: true
    on_error: true
    on_risk_breach: true

# Alert System Configuration
alerts:
  email_enabled: false  # Set to true and configure credentials to enable
  telegram_enabled: false  # Set to true and configure bot to enable
  min_level: "INFO"  # Minimum alert level: INFO, WARNING, ERROR, CRITICAL
  
  # Email configuration
  email:
    smtp_server: "smtp.gmail.com"
    smtp_port: 587
    sender_email: "your-email@gmail.com"
    sender_password: "your-app-password"  # Use app-specific password
    recipients:
      - "recipient1@example.com"
      - "recipient2@example.com"
  
  # Telegram configuration
  telegram:
    bot_token: "YOUR_BOT_TOKEN"  # Get from @BotFather
    chat_ids:
      - "YOUR_CHAT_ID"  # Get from @userinfobot

# Performance Tracking
performance:
  track_metrics: true
  metrics:
    - "total_return"
    - "sharpe_ratio"
    - "sortino_ratio"
    - "max_drawdown"
    - "win_rate"
    - "profit_factor"
  
  reporting:
    daily_summary: true
    weekly_report: true
    monthly_report: true

  # RSI Divergence Strategy (85-86% Win Rate)
  rsi_divergence:
    enabled: true
    rsi_period: 14
    divergence_lookback: 10
    overbought: 70
    oversold: 30
    min_divergence_strength: 0.6
    volume_confirmation: true
    conservative_mode: true  # Only highest probability setups
    
    # Risk management
    stop_loss_percent: 4.0    # 4% stop loss
    take_profit_percent: 6.0  # 6% profit target (1.5:1 R/R)
    
    # Filters
    min_volume: 100000        # Minimum volume for liquidity
    timeframe_filter: true    # Best on 1H-4H charts

  # Advanced Volume Breakout Strategy (90% Win Rate)
  advanced_volume_breakout:
    enabled: true
    lookback_period: 20
    volume_spike_multiplier: 1.5  # Volume must be 1.5x average
    min_breakout_percentage: 0.5  # 0.5% minimum breakout
    profit_target_percentage: 4.0 # 4% profit target
    stop_loss_percentage: 2.0     # 2% stop loss
    min_liquidity_volume: 100000  # Minimum average volume
    
    # Timing filters
    avoid_early_session: true     # Skip first 1.5 hours
    best_in_earnings: true        # Works best in earnings periods
    
    # Risk management
    max_position_size: 10000      # Maximum shares per position
    pyramid_additions: false      # No pyramiding for now

# Backtesting Settings
backtesting:
  start_date: "2023-01-01"
  end_date: "2024-12-31"
  initial_capital: 100000
  commission: 0.001  # 0.1% per trade
  slippage: 0.0005   # 0.05% slippage
  
# Development Mode
development:
  paper_trading: true  # Start with paper trading
  debug_mode: false
  save_trade_logs: true
  verbose_logging: true
